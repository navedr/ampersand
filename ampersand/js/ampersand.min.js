function loadjscssfile(e,t){if(t=="js"){var n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src",e)}else if(t=="css"){var n=document.createElement("link");n.setAttribute("rel","stylesheet");n.setAttribute("type","text/css");n.setAttribute("href",e)}if(typeof n!="undefined"){document.getElementsByTagName("head")[0].appendChild(n)}}var cssFiles=["bootstrap/css/bootstrap.min.css","jquery-ui/css/jquery-ui.min.css","css/introjs.min.css","css/validation.css","css/fancy.form.css","css/helper.css","font-awesome/css/font-awesome.min.css","css/topbar.css"];var jsFiles=["jquery/jquery.form.min.js","jquery-ui/js/jquery-ui.min.js","js/intro.min.js","bootstrap/js/bootstrap.min.js","js/underscore-min.js"];for(var x in cssFiles){loadjscssfile("ampersand/"+cssFiles[x],"css")}for(var x in jsFiles){loadjscssfile("ampersand/"+jsFiles[x],"js")}var Ajax={bindListener:function(e,t){var n=$("<div class='page-overlay'/>");var r=-t.outerHeight()+"px";var i=-t.outerWidth()+"px";t.css({marginTop:r,marginLeft:i});e.ajaxStart(function(){n.appendTo(e);n.on("click",function(){return false});t.show()});e.ajaxStop(function(){n.off("click");n.remove();t.fadeOut()});e.ajaxError(function(e,t,n,r){console.log("XHR Response: "+JSON.stringify(t))})},callHandler:function(e,t,n,r,i,s,o){$.ajax({type:e,url:t,cache:false,global:i,data:n,success:r,error:o?o:Ajax.errorHandler,async:s!=null?s:true})},getJson:function(e,t,n,r,i,s){$.ajax({url:e,dataType:"json",cache:false,global:r,data:t,success:n,error:s?s:Ajax.errorHandler,async:i})},postForJSON:function(e,t,n,r,i,s){$.ajax({type:"POST",dataType:"json",url:e,cache:false,global:r,data:t,success:n,error:s?s:Ajax.errorHandler,async:i})},errorHandler:function(e,t,n){if(e.status!=0){alert("There was error processing the request!!");console.log(e)}},ajaxForm:function(e,t,n,r){$(e).ajaxForm({success:t,beforeSubmit:n,error:r?r:Ajax.errorHandler})}};Templates={get:function(e){if($("input[template='"+e+"']").size()>0){return $("input[template='"+e+"']").val()}Ajax.callHandler("GET","/templates/"+e,null,function(t,n,r){templateHtml=t;$("body").append("<input type='hidden' template='"+e+"' />");$("input[template='"+e+"']").val(templateHtml)},true,false);return templateHtml}};Dialog={dialogId:"generic-dialog",create:function(e,t,n,r,i,s,o,u,a,f){var l=this;this.$dialog=$("#"+e);if(this.$dialog.size()>0){this.$dialog.remove()}this.$dialog=$("<div id='"+e+"'></div>");if(o){t+="<p><center><button class='btn btn-danger dialog-close-btn'>Close</button></center></p>"}this.$dialog.html(t);$("body").append(this.$dialog);this.$dialog.dialog({autoOpen:u,show:"fade",hide:"fade",zIndex:s?s:10001,width:r,minHeight:"auto",modal:true,resizable:false,closeOnEscape:false,dialogClass:n?n:"",title:f?f:""});this.$dialog.find(".dialog-close-btn").click(function(t){$("#"+e).dialog("close");return false});if(a){this.$dialog.on("dialogclose",function(e,t){l.$dialog.remove()})}if(!i){this.$dialog.parents(".ui-dialog").find(".ui-dialog-titlebar").remove()}},show:function(e,t,n,r,i,s,o){this.create(this.dialogId,e,t,n,r,i,s,true,true,o)},showAlert:function(e,t){e=t?e:"<h4 class='text-center mtop'>"+e+"</h4>";this.show(e,null,400,false,null,true)},close:function(){this.$dialog.dialog("close")}};Popover={create:function(e,t,n,r,i){t=t+"<button class='close' onclick=\"$$('#"+e+"').popover('hide');\">&times;</button>";$$("#"+e).popover({placement:i?i:"top",html:true,content:n,container:r?r:false,title:t})},bindEvents:function(){$(".popover .close-popover").on("click",function(e){var t=$(e.target);t.parents(".popover").hide();return false});$(".popover-trigger").on("click",function(e){var t=$(e.target);if(!t.hasClass("popover-trigger")){t=t.parents(".popover-trigger")}if(t.data("popoverId")!=null){$("#"+t.data("popoverId")).toggle();return false}})},init:function(){this.bindEvents()}};TopBar={init:function(){this.bindEvents()},bindEvents:function(){$(".top-bar .top-bar-toggle").on("click",$.proxy(this.toggleTopBar,this))},toggleTopBar:function(e){var t=$(e.target);if(!t.hasClass("top-bar-toggle")){t=t.parents(".top-bar-toggle")}var n=t.parents(".top-bar").find(".top-bar-content");n.slideToggle({duration:300,easing:"easeInOutBack",complete:function(){var e=n.is(":visible");if(e){if(t.data("visible")){t.html(t.data("visible"))}}else{if(t.data("hidden")){t.html(t.data("hidden"))}}}});return false}};Validation={init:function(){$(".validate").on("change",function(e){Validation.validateInput($(e.target))})},validateInput:function(e){var t=e.val();var n=true;var r="";if(e.hasClass("validate-required")&&n){n=t!="";if(e.data("requiredMessage")!=null)r=e.data("requiredMessage");else r="This field is required"}if(e.hasClass("validate-number")&&n){n=!isNaN(t);if(e.data("numberMessage")!=null)r=e.data("numberMessage");else r="Please enter a valid number"}if(e.hasClass("validate-money")&&n){n=!isNaN(t);if(n)n=t>=0;if(e.data("moneyMessage")!=null)r=e.data("moneyMessage");else r="Please enter a valid amount"}if(e.hasClass("validate-positive-number")&&n){n=!isNaN(t);if(n)n=t>=0;if(e.data("positiveNumberMessage")!=null)r=e.data("positiveNumberMessage");else r="Please enter a valid positive number"}if(e.hasClass("validate-email")&&n){var i=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;n=t.search(i)!=-1;if(e.data("emailMessage")!=null)r=e.data("emailMessage");else r="Please enter Email in correct format"}if(e.hasClass("validate-digits")&&n){n=t.match(/[0-9]*/)[0].length==t.length;if(e.data("digitsMessage")!=null)r=e.data("digitsMessage");else r="Only digits allowed"}if(e.hasClass("validate-compare")&&n){if(e.data("compareId")!=null){var s=$("#"+e.data("compareId")).val();n=s==t;if(e.data("compareMessage")!=null)r=e.data("compareMessage");else r="Values do not match"}}if(e.hasClass("validate-minlength")&&n){if(e.data("minLength")!=null){var o=parseInt(e.data("minLength"));n=t.length>=o;if(e.data("minlengthMessage")!=null)r=e.data("minlengthMessage");else r="Minimum "+o+" characters required."}}if(e.hasClass("validate-maxlength")&&n){if(e.data("maxLength")!=null){var u=parseInt(e.data("maxLength"));n=t.length<=u;if(e.data("maxlengthMessage")!=null)r=e.data("maxlengthMessage");else r="Maximum "+u+" characters allowed."}}if(e.next().hasClass("error-message"))e.next().remove();if(n){e.removeClass("error-background");return true}else{if(r!=""){e.after("<div class='error-message'>"+r+"</div>")}e.addClass("error-background");return false}},validateForm:function(e){var t=$("#"+e+" .validate");var n=true;$.each(t,function(){var e=$(this);if(e.is(":visible")){var t=Validation.validateInput(e);n=n&t}});return n}};(function(e){var t=e({});e.subscribe=function(){t.on.apply(t,arguments)};e.unsubscribe=function(){t.off.apply(t,arguments)};e.publish=function(){t.trigger.apply(t,arguments)}})(jQuery);$(document).ready(function(){TopBar.init();Popover.init();Validation.init()})