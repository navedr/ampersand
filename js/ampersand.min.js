function loadjscssfile(a,b){if(b=="js"){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a)}else{if(b=="css"){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",a)}}if(typeof c!="undefined"){document.getElementsByTagName("head")[0].appendChild(c)}}var cssFiles=["bootstrap/css/bootstrap.min.css","bootstrap/css/bootstrap-responsive.min.css","jquery-ui/css/jquery-ui.css","jquery-ui/smoothness/jquery-ui-1.8.17.custom.css","css/introjs.min.css","css/validation.css","css/fancy.form.css","css/helper.css","font-awesome/css/font-awesome.min.css","css/topbar.css"];var jsFiles=["jquery/jquery.form.min.js","jquery-ui/js/jquery-ui.js","js/intro.min.js","bootstrap/js/bootstrap.min.js","js/underscore-min.js"];for(var x in cssFiles){loadjscssfile(cssFiles[x],"css")}for(var x in jsFiles){loadjscssfile(jsFiles[x],"js")}var Ajax={bindListener:function(a,c){var b=$("<div class='page-overlay'/>");var e=-(c.outerHeight())+"px";var d=-(c.outerWidth())+"px";c.css({marginTop:e,marginLeft:d});a.ajaxStart(function(){b.appendTo(a);b.on("click",function(){return false});c.show()});a.ajaxStop(function(){b.off("click");b.remove();c.fadeOut()});a.ajaxError(function(h,i,f,g){console.log("XHR Response: "+JSON.stringify(i))})},callHandler:function(d,b,e,g,a,c,f){$.ajax({type:d,url:b,cache:false,global:a,data:e,success:g,error:f?f:Ajax.errorHandler,async:(c!=null)?c:true})},getJson:function(b,d,f,a,c,e){$.ajax({url:b,dataType:"json",cache:false,global:a,data:d,success:f,error:e?e:Ajax.errorHandler,async:c})},postForJSON:function(b,d,f,a,c,e){$.ajax({type:"POST",dataType:"json",url:b,cache:false,global:a,data:d,success:f,error:e?e:Ajax.errorHandler,async:c})},errorHandler:function(b,c,a){if(b.status!=0){alert("There was error processing the request!!");console.log(b)}},ajaxForm:function(c,b,a){$(c).ajaxForm({success:b,beforeSubmit:a,error:errorHanlder?errorHanlder:Ajax.errorHandler})}};Templates={get:function(a){if($("input[template='"+a+"']").size()>0){return $("input[template='"+a+"']").val()}Ajax.callHandler("GET","/templates/"+a,null,function(c,d,b){templateHtml=c;$("body").append("<input type='hidden' template='"+a+"' />");$("input[template='"+a+"']").val(templateHtml)},true,false);return templateHtml}};Dialog={dialogId:"generic-dialog",create:function(j,e,k,b,h,f,c,g,d,a){var i=this;this.$dialog=$("#"+j);if(this.$dialog.size()>0){this.$dialog.remove()}this.$dialog=$("<div id='"+j+"'></div>");if(c){e+="<p><center><button class='btn btn-danger dialog-close-btn'>Close</button></center></p>"}this.$dialog.html(e);$("body").append(this.$dialog);this.$dialog.dialog({autoOpen:g,show:"fade",hide:"fade",zIndex:(f)?f:10001,width:b,minHeight:"auto",modal:true,resizable:false,closeOnEscape:false,dialogClass:(k)?k:"",title:(a)?a:""});this.$dialog.find(".dialog-close-btn").click(function(l){$("#"+j).dialog("close");return false});if(d){this.$dialog.on("dialogclose",function(l,m){i.$dialog.remove()})}if(!h){this.$dialog.parents(".ui-dialog").find(".ui-dialog-titlebar").remove()}},show:function(e,b,d,f,g,c,a){this.create(this.dialogId,e,b,d,f,g,c,true,true,a)},showAlert:function(b,a){b=(a)?b:"<h4 class='text-center mtop'>"+b+"</h4>";this.show(b,null,400,false,null,true)},close:function(){this.$dialog.dialog("close")}};Popover={create:function(e,d,c,a,b){d=d+"<button class='close' onclick=\"$$('#"+e+"').popover('hide');\">&times;</button>";$$("#"+e).popover({placement:(b)?b:"top",html:true,content:c,container:(a)?a:false,title:d})},bindEvents:function(){$(".popover .close-popover").on("click",function(b){var a=$(b.target);a.parents(".popover").hide();return false});$(".popover-trigger").on("click",function(b){var a=$(b.target);if(!a.hasClass("popover-trigger")){a=a.parents(".popover-trigger")}if(a.data("popoverId")!=null){$("#"+a.data("popoverId")).toggle();return false}})},init:function(){this.bindEvents()}};TopBar={init:function(){this.bindEvents()},bindEvents:function(){$(".top-bar .top-bar-toggle").on("click",$.proxy(this.toggleTopBar,this))},toggleTopBar:function(c){var b=$(c.target);if(!b.hasClass("top-bar-toggle")){b=b.parents(".top-bar-toggle")}var a=b.parents(".top-bar").find(".top-bar-content");a.slideToggle({duration:300,easing:"easeInOutBack",complete:function(){var d=a.is(":visible");if(d){if(b.data("visible")){b.html(b.data("visible"))}}else{if(b.data("hidden")){b.html(b.data("hidden"))}}}});return false}};Validation={init:function(){$(".validate").on("change",function(a){Validation.validateInput($(a.target))})},validateInput:function(f){var g=f.val();var b=true;var h="";if(f.hasClass("validate-required")&&b){b=(g!="");if(f.data("requiredMessage")!=null){h=f.data("requiredMessage")}else{h="This field is required"}}if(f.hasClass("validate-number")&&b){b=!isNaN(g);if(f.data("numberMessage")!=null){h=f.data("numberMessage")}else{h="Please enter a valid number"}}if(f.hasClass("validate-money")&&b){b=!isNaN(g);if(b){b=(g>=0)}if(f.data("moneyMessage")!=null){h=f.data("moneyMessage")}else{h="Please enter a valid amount"}}if(f.hasClass("validate-positive-number")&&b){b=!isNaN(g);if(b){b=(g>=0)}if(f.data("positiveNumberMessage")!=null){h=f.data("positiveNumberMessage")}else{h="Please enter a valid positive number"}}if(f.hasClass("validate-email")&&b){var a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;b=(g.search(a)!=-1);if(f.data("emailMessage")!=null){h=f.data("emailMessage")}else{h="Please enter Email in correct format"}}if(f.hasClass("validate-digits")&&b){b=g.match(/[0-9]*/)[0].length==g.length;if(f.data("digitsMessage")!=null){h=f.data("digitsMessage")}else{h="Only digits allowed"}}if(f.hasClass("validate-compare")&&b){if(f.data("compareId")!=null){var c=$("#"+f.data("compareId")).val();b=(c==g);if(f.data("compareMessage")!=null){h=f.data("compareMessage")}else{h="Values do not match"}}}if(f.hasClass("validate-minlength")&&b){if(f.data("minLength")!=null){var e=parseInt(f.data("minLength"));b=(g.length>=e);if(f.data("minlengthMessage")!=null){h=f.data("minlengthMessage")}else{h="Minimum "+e+" characters required."}}}if(f.hasClass("validate-maxlength")&&b){if(f.data("maxLength")!=null){var d=parseInt(f.data("maxLength"));b=(g.length<=d);if(f.data("maxlengthMessage")!=null){h=f.data("maxlengthMessage")}else{h="Maximum "+d+" characters allowed."}}}if(f.next().hasClass("error-message")){f.next().remove()}if(b){f.removeClass("error-background");return true}else{if(h!=""){f.after("<div class='error-message'>"+h+"</div>")}f.addClass("error-background");return false}},validateForm:function(b){var a=$("#"+b+" .validate");var c=true;$.each(a,function(){var e=$(this);if(e.is(":visible")){var d=Validation.validateInput(e);c=c&d}});return c}};(function(a){var b=a({});a.subscribe=function(){b.on.apply(b,arguments)};a.unsubscribe=function(){b.off.apply(b,arguments)};a.publish=function(){b.trigger.apply(b,arguments)}}(jQuery));$(document).ready(function(){TopBar.init();Popover.init();Validation.init()});